/* Wizard Container */
.wizard-overlay
  position: fixed
  top: 0
  left: 0
  width: 100vw
  height: 100vh
  display: flex
  justify-content: center
  align-items: center
  z-index: 1000
  /* Prevent interaction with elements behind the overlay */
  pointer-events: all
  // Add padding for mobile to ensure content is visible
  padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)

  @media (max-width: 768px)
    align-items: flex-start // Align to top on mobile

.overlay-background
  position: absolute
  top: 0
  left: 0
  width: 100%
  height: 100%
  // background-color: var(--sk-bg-1)
  // background: hsl(255.41deg 22.75% 12.21%)
  opacity: 0.5

.wizard-container
  position: relative
  width: calc(100% - (var(--margin) * 2))
  max-width: 2000px
  height: calc(100% - (var(--margin) * 2))
  max-height: calc(100vh - 40px) // Ensure there's always some margin
  background-color: var(--sk-bg-2)
  // background: linear-gradient(135deg, #121212 0%, #1f0c34 50%, #121212 100%)
  // background: linear-gradient(135deg, #121212 0%, #201928 50%, #121212 100%)
  // background: linear-gradient(135deg, #121212 0%, #130b1d 50%, #121212 100%)
  // background: linear-gradient(135deg, #121212 0%, hsl(246.18deg 29.81% 11.21%) 50%, #121212 100%)
  // background: linear-gradient(135deg, #121212 0%, hsl(255.41deg 22.75% 12.21%) 50%, #121212 100%)
  border-radius: 16px
  overflow: hidden
  /* Use theme shadow variable */
  box-shadow: var(--sk-shadow)
  /* Ensure content doesn't overflow rounded corners */
  border: 1px solid var(--sk-border)
  z-index: 1
  border: 1px solid rgba(117, 60, 183, 0.5) 
  box-shadow: 0 -1px 15px 2px rgba(117, 60, 183, 0.05), 0 2px 10px 2px rgba(117, 60, 183, 0.1)
  display: flex
  flex-direction: column

  @media (max-width: 768px)
    width: 100%
    height: 100vh
    max-height: -webkit-fill-available // Fix for iOS height
    margin: 0
    border-radius: 0
    border: none

/* Wizard Layout */
.wizard-layout
  width: 100%
  height: 100%
  display: flex
  justify-content: center
  align-items: stretch
  flex: 1
  min-height: 0 // Important for Firefox

.wizard-content
  flex: 1
  height: 100%
  width: 100%
  display: flex
  flex-direction: column
  min-height: 0 // Important for Firefox

/* Navigation Styles */
.wizard-nav
  // width: 200px
  // max-width: 500px
  border-right: 0.5px solid var(--sk-bg-4)
  padding: 250px 0
  height: 100%
  display: none
  flex-direction: column
  justify-content: flex-start

  @media (min-width: $breakpoint-sm)

  @media (min-width: $breakpoint-md)

  @media (min-width: $breakpoint-lg)
    display: flex

  @media (min-width: $breakpoint-xl)


.wizard-nav-content
  display: flex
  flex-direction: column
  /* gap: 3rem */

.step-indicator
  display: flex
  align-items: center
  opacity: 0.5
  transition: all 0.2s ease-in-out
  font-size: 1rem
  line-height: 2rem
  position: relative
  font-weight: 300
  text-align: left
  padding: 1.5rem 1rem
  padding-right: 6rem

  @media (min-width: $breakpoint-lg)
    font-size: 1.5rem


.step-indicator.active
  opacity: 0.8
  /* font-weight: 600 */
  background-color: var(--sk-bg-4)

.step-indicator.successful
  opacity: 0.6

.step-indicator.clickable
  cursor: pointer

.step-indicator.clickable:hover
  opacity: 0.8
  background-color: var(--sk-bg-3)

.step-indicator i
  font-size: 1.5rem
  width: 50px
  text-align: center

  @media (min-width: $breakpoint-lg)
    font-size: 2rem


.icons-state
  right: 1rem
  position: absolute
  color: var(--sk-theme-1)
  font-size: 1.4rem

/* Step Styles */
.wizard-step
  display: flex
  flex-direction: column
  height: 100%
  min-height: 0 // Important for Firefox
  
  @media (max-width: 768px)
    height: 100vh
    height: -webkit-fill-available

.wizard-step-header
  padding: 2rem
  border-bottom: 0.5px solid var(--sk-bg-4)
  background: var(--sk-bg-2)
  position: relative
  z-index: 5
  
  @media (max-width: 768px)
    padding: 4rem 2rem 2rem // Add more top padding on mobile
    margin-top: env(safe-area-inset-top) // Account for iOS notch
    box-shadow: 0 1px 15px 2px rgba(0, 0, 0, 0.1)
  
  @media (min-width: $breakpoint-sm)
    padding: 4rem
  
  @media (min-width: $breakpoint-2xl)
    padding: 6rem

.wizard-step-title
  font-weight: var(--sk-font-weight-bold)
  font-weight: 700
  text-align: center

  @media (max-width: 768px)
    font-size: var(--sk-text-4xl)
    margin: 0

.wizard-step-description
  color: #4d596c
  margin: 0.15lh 0 0.4lh 0
  font-weight: 300
  text-align: center

  @media (max-width: 768px)
    font-size: var(--sk-text-lg)
    margin: 0.5rem 0 0 0

.wizard-step-content
  flex: 1
  display: flex
  flex-direction: column
  overflow: hidden
  min-height: 0 // Important for Firefox
  position: relative // Add this to establish positioning context

/* Content container styles */
.step-content-container
  flex: 1
  overflow: hidden
  border-radius: 8px
  margin: 1rem 0

.step-scrollable-content
  flex: 1
  overflow-y: auto
  -webkit-overflow-scrolling: touch
  padding: 2rem
  display: flex
  justify-content: center
  padding-bottom: calc(80px + env(safe-area-inset-bottom)) // Add space for buttons
  
  @media (max-width: 768px)
    padding: 2rem
    padding-bottom: calc(80px + env(safe-area-inset-bottom)) // Add space for buttons

  @media (min-width: $breakpoint-sm)
    padding: 2rem 4rem

  @media (min-width: $breakpoint-2xl)
    padding: 3rem 6rem

.step-header-bounded
  display: flex
  flex-direction: column
  align-items: center
  justify-content: center
  gap: 1rem
  
  @media (max-width: 768px)
    gap: 0.5rem // Reduce gap on mobile

.step-bounded
  max-width: 800px
  width: 100%
  display: flex
  flex-direction: column
  margin: auto 0
  
  @media (max-width: 768px)
    margin: 0 // Remove margin on mobile to better utilize space

  /* Scrollbar styles */
  &::-webkit-scrollbar
    width: 12px
  
  &::-webkit-scrollbar-track
    background: var(--sk-bg-4)
    border-radius: 4px
    margin: 20px 0  /*space top and bottom not working */
  
  &::-webkit-scrollbar-thumb
    background: var(--sk-scrollbar)
    border-radius: 4px
    
    &:hover
      background: var(--sk-fg-3)

  
/* Content layout options */
.step-content-centered
  display: flex
  flex-direction: column
  align-items: center
  justify-content: center
  height: 100%

.step-content-centered-left
  display: flex
  flex-direction: column
  align-items: flex-start
  justify-content: center
  height: 100%
  width: 100%

/* Button container */
.button-container
  display: flex
  justify-content: space-between
  gap: 25px
  padding: 2rem
  border-top: 0.5px solid var(--sk-bg-4)
  background: var(--sk-bg-2)
  
  @media (max-width: 768px)
    position: fixed
    bottom: 0
    left: 0
    right: 0
    padding: 1rem
    padding-bottom: calc(1rem + env(safe-area-inset-bottom))
    gap: 10px
    z-index: 10
    box-shadow: 0 -1px 15px 2px rgba(0, 0, 0, 0.1)
    
  @media (min-width: $breakpoint-sm)
    padding: 3rem 3rem
    position: relative
    
  @media (min-width: $breakpoint-2xl)
    padding: 3.5rem 6rem

  
.button-group-right
    // flex: 1   //put at end
    display: flex
    gap: 1rem

.button-group-left
    display: flex
    gap: 1rem

.step-content-flex
  display: flex
  flex-direction: column
  height: 100%
  gap: 2rem
  width: 100%
  align-items: center
  justify-content: center

  @media (min-width: 1200px)
    flex-direction: row

/* Close button */
.close-button
  position: absolute
  top: 1rem
  right: 0.8rem
  background: none
  border: none
  color: var(--sk-fg-3)
  font-size: 1.5rem
  cursor: pointer
  padding: 0.5rem
  display: flex
  align-items: center
  justify-content: center
  transition: color 0.2s ease-in-out
  z-index: 2

  @media (min-width: $breakpoint-sm)
    top: 1.8rem
    right: 1.8rem



.close-button:hover
  color: var(--sk-fg-1)


.form-container
    // flex: 1
    padding: 0 1rem 0 0
    display: flex
    flex-direction: column
    gap: 1rem
    // align-items: center
    // justify-content: left
    width: 100%
    // max-width: 600px

    @media (min-width: $breakpoint-sm)
      // padding: 0 2rem 

    @media (min-width: $breakpoint-lg)
      // padding: 0 2rem


.form-message-container
    min-height: 60px
    margin-top: 1rem

.form-message
    font-size: 1.2rem
    padding: 1rem
    border-radius: 4px
    opacity: 0
    animation: fadeIn 0.2s ease forwards
    display: flex
    align-items: center

    &.error
        background-color: rgba(255, 68, 68, 0.1)
        color: #ff4444

    &.warn
        background-color: rgba(255, 170, 0, 0.1)
        color: #ffaa00

    &.info
        background-color: rgba(68, 170, 255, 0.1)
        color: #44aaff

    &.success
        background-color: rgba(68, 255, 136, 0.1)
        color: #44ff88

@keyframes fadeIn
    from
        opacity: 0
        transform: translateY(-5px)
    to
        opacity: 1
        transform: translateY(0)




/* Wizard variants */
.onboarding
  width: 100%
  height: 100%
  display: flex
  justify-content: center
  align-items: center

.onboarding-container
  flex: 1
  margin: 100px
  padding: 10px
  height: 80%

.spacer
  flex: 1

/* Icons state */
.icons-state
  color: var(--sk-fg-3)
  position: absolute
  right: 1rem

.status-completed
  color: var(--sk-theme-1, green)

.status-queued
  color: orange

/* .status-syncing
  color: #3b82f6 */

.status-integrated
  color: #10b981

.status-error
  color: var(--sk-error, red)

.status-failed
  color: #ef4444